<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ç­ç´šæ•¸ä½å¹³å° v3.3.3</title>

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" id="chrome-theme" content="#f8fafc">

    <style>
        :root {
            --p: #4361ee; --p-light: rgba(67, 97, 238, 0.15); --g: #7209b7; 
            --bg: #f8fafc; --card: #ffffff; --text: #1e293b; --sub: #64748b; 
            --border: rgba(0,0,0,0.08); --nav-bg: rgba(255, 255, 255, 0.85); 
            --safe-top: env(safe-area-inset-top, 20px);
            --safe-bottom: env(safe-area-inset-bottom, 20px);
        }

        .dark-mode {
            --bg: #020617; --card: #111827; --text: #f8fafc; --sub: #94a3b8; 
            --border: rgba(255,255,255,0.12); --nav-bg: rgba(15, 23, 42, 0.85); --accent: #fbbf24;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            margin: 0; width: 100vw; height: 100dvh; background: var(--bg);
            color: var(--text); font-family: -apple-system, system-ui, sans-serif;
            overflow: hidden; position: fixed;
        }

        /* æ¢å¾©åŸæœ‰çš„é ‚éƒ¨èˆ‡ Header */
        .top-notice {
            background: var(--p); color: white;
            padding: calc(var(--safe-top) + 8px) 15px 10px;
            font-size: 12px; font-weight: 800; text-align: center;
        }

        header {
            height: 70px; padding: 0 20px; background: var(--nav-bg);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border); display: flex;
            justify-content: space-between; align-items: center;
        }

        .brand h1 { margin: 0; font-size: 20px; font-weight: 900; color: var(--p); }
        .controls { display: flex; gap: 10px; }
        .toggle-group { display: flex; background: rgba(0,0,0,0.06); padding: 4px; border-radius: 12px; }
        .icon-btn { border: none; background: transparent; width: 38px; height: 34px; border-radius: 9px; display: flex; align-items: center; justify-content: center; color: var(--sub); }
        .icon-btn.active { background: var(--p); color: white !important; }
        .dark-mode .icon-btn.active { background: var(--accent); color: black !important; }
        .circle-tool { width: 40px; height: 40px; border-radius: 50%; border: 1px solid var(--border); background: var(--card); }
        svg { width: 18px; height: 18px; fill: none; stroke: currentColor; stroke-width: 2.5; }

        /* æ¢å¾©çµ²æ»‘æ»¾å‹•å¼•æ“ */
        .viewport {
            width: 100%; height: calc(100dvh - 70px - 100px);
            display: flex; overflow-x: auto; overflow-y: hidden;
            scroll-snap-type: x mandatory; scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
        }
        .viewport::-webkit-scrollbar { display: none; }
        .page-panel { 
            flex: 0 0 100%; width: 100%; height: 100%; 
            scroll-snap-align: start; overflow-y: auto; 
            padding: 20px 20px 150px; 
        }

        /* ä¿®æ­£ä½ˆå±€ç•°å¸¸ */
        .content-grid { display: grid; gap: 15px; }
        [data-layout="list-mode"] .content-grid { grid-template-columns: 1fr; }
        [data-layout="grid-mode"] .content-grid { grid-template-columns: repeat(2, 1fr); }

        .card { 
            background: var(--card); border: 1px solid var(--border); border-radius: 24px; 
            display: flex; transition: 0.2s; cursor: pointer;
        }
        [data-layout="list-mode"] .card { padding: 20px; align-items: center; }
        [data-layout="grid-mode"] .card { padding: 25px 15px; flex-direction: column; align-items: center; text-align: center; }
        
        .card-icon { width: 52px; height: 52px; border-radius: 16px; background: var(--p-light); color: var(--p); display: flex; align-items: center; justify-content: center; font-size: 24px; }
        [data-layout="list-mode"] .card-icon { margin-right: 15px; }
        [data-layout="grid-mode"] .card-icon { margin-bottom: 12px; }

        .card-info h2 { margin: 0; font-size: 16px; font-weight: 800; }
        .card-info p { margin: 4px 0 0; font-size: 11px; color: var(--sub); }

        /* åº•éƒ¨å°è¦½åˆ— (ç¢ºä¿ z-index æœ€é«˜ä¸”ä¸è¢«é˜»æ“‹) */
        .nav-dock { position: fixed; bottom: calc(20px + var(--safe-bottom)); left: 0; width: 100%; display: flex; justify-content: center; pointer-events: none; z-index: 9999; }
        .nav-glass { pointer-events: auto; background: var(--nav-bg); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); display: flex; padding: 6px; border-radius: 35px; border: 1px solid var(--border); box-shadow: 0 10px 30px rgba(0,0,0,0.15); width: 90%; max-width: 400px; }
        .nav-item { flex: 1; text-align: center; padding: 12px 0; font-size: 13px; font-weight: 900; color: var(--sub); border-radius: 30px; }
        .nav-item.active { color: white; background: var(--p); }

        /* å…¨è¢å¹•å®¹å™¨ */
        #tool-container { position: fixed; inset: 0; background: var(--bg); z-index: 10000; transform: translateY(100%); transition: 0.4s cubic-bezier(0.1, 0.7, 0.1, 1); display: flex; flex-direction: column; }
        #tool-container.active { transform: translateY(0); }
        .tool-bar { padding: calc(var(--safe-top) + 10px) 20px 10px; display: flex; align-items: center; background: var(--card); border-bottom: 1px solid var(--border); }
        iframe { flex: 1; border: none; }
    </style>
</head>
<body data-layout="list-mode">

    <div class="top-notice">ğŸ“¢ éš¨æ©Ÿåˆ†çµ„èˆ‡ç•™è¨€æ¿å·²è£œé½Š ï½œ å·²å„ªåŒ– Android/iOS çµ²æ»‘æ»¾å‹•</div>

    <header>
        <div class="brand"><h1>ç­ç´šæ•¸ä½å¹³å°</h1><p>V3.3.3 FULL APP</p></div>
        <div class="controls">
            <div class="toggle-group">
                <button class="icon-btn" id="listToggle" onclick="Hub.updateLayout('list-mode')"><svg viewBox="0 0 24 24"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><path d="M3 6h.01M3 12h.01M3 18h.01"/></svg></button>
                <button class="icon-btn" id="gridToggle" onclick="Hub.updateLayout('grid-mode')"><svg viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg></button>
            </div>
            <button class="icon-btn circle-tool" onclick="Hub.updateTheme()"><svg id="theme-icon" viewBox="0 0 24 24"></svg></button>
        </div>
    </header>

    <main class="viewport" id="scroll-engine">
        <section class="page-panel"><div class="content-grid">
            <div class="card" onclick="Hub.openTool('è¡Œäº‹æ›†/index.html','ç­ç´šè¡Œäº‹æ›†')"><div class="card-icon">ğŸ“…</div><div class="card-info"><h2>ç­ç´šè¡Œäº‹æ›†</h2><p>æŒæ¡é‡è¦æ´»å‹•ä¸æ¼æ¥</p></div></div>
            <div class="card" onclick="Hub.openTool('homework/index.html','ä½œæ¥­å¾…è¾¦')"><div class="card-icon">ğŸ“’</div><div class="card-info"><h2>ä½œæ¥­å¾…è¾¦</h2><p>å³æ™‚æ›´æ–°æœ€æ–°ä½œæ¥­å…§å®¹</p></div></div>
            <div class="card" onclick="Hub.openTool('countdown/index.html','è€ƒç¨‹å€’æ•¸')"><div class="card-icon">â³</div><div class="card-info"><h2>è€ƒç¨‹å€’æ•¸</h2><p>å€’æ•¸ç›®æ¨™å¤§è€ƒå‰©é¤˜å¤©æ•¸</p></div></div>
        </div></section>

        <section class="page-panel"><div class="content-grid">
            <div class="card" onclick="Hub.openTool('help/student.html','åŒ¿åæ±‚åŠ©')"><div class="card-icon">ğŸŒ±</div><div class="card-info"><h2>åŒ¿åæ±‚åŠ©</h2><p>å°å¸«å³æ™‚å‚¾è½æ‚¨çš„å¿ƒè²</p></div></div>
            <div class="card" onclick="Hub.openTool('unknownmail/index.html','åŒ¿åä¿¡ç®±')"><div class="card-icon">âœ‰ï¸</div><div class="card-info"><h2>åŒ¿åä¿¡ç®±</h2><p>æº«é¦¨æé†’ä½ çš„å¥½åŒå­¸</p></div></div>
            <div class="card" onclick="Hub.openTool('board/index.html','å¯¦åç•™è¨€æ¿')"><div class="card-icon">ğŸ’¬</div><div class="card-info"><h2>å¯¦åç•™è¨€æ¿</h2><p>ç­ç´šå…¬é–‹è¨è«–äº¤æµå€</p></div></div>
            <div class="card" onclick="Hub.openTool('åŒ¿å/index.html','åŒ¿åè¨±é¡˜æ± ')"><div class="card-icon">âœ¨</div><div class="card-info"><h2>åŒ¿åè¨±é¡˜æ± </h2><p>è®“ç­ç´šæ›´å¥½çš„é»å­</p></div></div>
        </div></section>

        <section class="page-panel"><div class="content-grid">
            <div class="card" onclick="Hub.openTool('cleaning/index.html','æ‰“æƒå‹¤å‹™')"><div class="card-icon">ğŸ§¹</div><div class="card-info"><h2>æ‰“æƒå‹¤å‹™</h2><p>æŸ¥çœ‹æƒå€é»æ•¸èˆ‡åˆ†é…</p></div></div>
            <div class="card" onclick="Hub.openTool('grouping/index.html','éš¨æ©Ÿåˆ†çµ„')"><div class="card-icon">ğŸ²</div><div class="card-info"><h2>éš¨æ©Ÿåˆ†çµ„</h2><p>å¿«é€Ÿç”Ÿæˆå…¬å¹³çš„åˆ†çµ„åå–®</p></div></div>
            <div class="card" onclick="Hub.openTool('seating/index.html','é¸ä½ç³»çµ±')"><div class="card-icon">ğŸª‘</div><div class="card-info"><h2>é¸ä½ç³»çµ±</h2><p>å…¬å¹³åˆºæ¿€çš„éš¨æ©Ÿé¸ä½</p></div></div>
            <div class="card" onclick="Hub.openTool('vote/index.html','æ•¸ä½æŠ•ç¥¨')"><div class="card-icon">ğŸ—³ï¸</div><div class="card-info"><h2>æ•¸ä½æŠ•ç¥¨</h2><p>ç­ç´šäº‹å‹™å³æ™‚è¡¨æ±º</p></div></div>
        </div></section>

        <section class="page-panel"><div class="content-grid">
            <div class="card" onclick="Hub.openTool('exam_calc/index.html','æ®µè€ƒåŠ æ¬Š')"><div class="card-icon">ğŸ“</div><div class="card-info"><h2>æ®µè€ƒåŠ æ¬Š</h2><p>è¨ˆç®—æ®µè€ƒåŠ æ¬Šå¹³å‡åˆ†æ•¸</p></div></div>
            <div class="card" onclick="Hub.openTool('final_calc/index.html','å­¸æœŸç¸½åˆ†')"><div class="card-icon">ğŸ“ˆ</div><div class="card-info"><h2>å­¸æœŸç¸½åˆ†</h2><p>åˆ¤å®šå­¸åˆ†é€šéèˆ‡è£œè€ƒ</p></div></div>
        </div></section>
    </main>

    <nav class="nav-dock"><div class="nav-glass">
        <div class="nav-item" id="nav0" onclick="Hub.moveTo(0)">æé†’</div>
        <div class="nav-item" id="nav1" onclick="Hub.moveTo(1)">äº’å‹•</div>
        <div class="nav-item" id="nav2" onclick="Hub.moveTo(2)">ç­å‹™</div>
        <div class="nav-item" id="nav3" onclick="Hub.moveTo(3)">æˆç¸¾</div>
    </div></nav>

    <div id="tool-container">
        <div class="tool-bar">
            <button onclick="Hub.closeTool()" style="border:none; background:none; color:var(--p); font-weight:900; font-size:16px;">âœ• é—œé–‰</button>
            <div id="tool-title" style="flex:1; text-align:center; font-weight:800;"></div>
            <div style="width:60px;"></div>
        </div>
        <iframe id="tool-iframe" src=""></iframe>
    </div>

    <script>
        const Hub = {
            state: {
                idx: parseInt(localStorage.getItem('lastPage')) || 0,
                isDark: document.documentElement.classList.contains('dark-mode'),
                layout: localStorage.getItem('layout') || 'list-mode'
            },
            init() {
                this.updateLayout(this.state.layout);
                this.syncUI();
                setTimeout(() => this.moveTo(this.state.idx, 'auto'), 100);
                this.bind();
            },
            moveTo(idx, behavior = 'smooth') {
                const el = document.getElementById('scroll-engine');
                el.scrollTo({ left: idx * el.offsetWidth, behavior });
                this.state.idx = idx;
                localStorage.setItem('lastPage', idx);
                document.querySelectorAll('.nav-item').forEach((n, i) => n.classList.toggle('active', i === idx));
            },
            updateLayout(mode) {
                document.documentElement.setAttribute('data-layout', mode);
                this.state.layout = mode;
                localStorage.setItem('layout', mode);
                document.getElementById('listToggle').classList.toggle('active', mode === 'list-mode');
                document.getElementById('gridToggle').classList.toggle('active', mode === 'grid-mode');
                setTimeout(() => this.moveTo(this.state.idx, 'auto'), 50);
            },
            updateTheme() {
                this.state.isDark = !this.state.isDark;
                document.documentElement.classList.toggle('dark-mode', this.state.isDark);
                localStorage.setItem('theme', this.state.isDark ? 'dark' : 'light');
                this.syncUI();
            },
            syncUI() {
                const icon = document.getElementById('theme-icon');
                icon.innerHTML = this.state.isDark 
                    ? `<circle cx="12" cy="12" r="5" fill="currentColor"/><path d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2" stroke="currentColor"/>`
                    : `<path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" fill="currentColor" stroke="currentColor"/>`;
            },
            openTool(url, title) {
                document.getElementById('tool-title').innerText = title;
                document.getElementById('tool-iframe').src = url;
                document.getElementById('tool-container').classList.add('active');
            },
            closeTool() {
                document.getElementById('tool-container').classList.remove('active');
                setTimeout(() => { document.getElementById('tool-iframe').src = ''; }, 400);
            },
            bind() {
                const el = document.getElementById('scroll-engine');
                el.addEventListener('scroll', () => {
                    const newIdx = Math.round(el.scrollLeft / el.offsetWidth);
                    if(newIdx !== this.state.idx) {
                        this.state.idx = newIdx;
                        localStorage.setItem('lastPage', newIdx);
                        document.querySelectorAll('.nav-item').forEach((n, i) => n.classList.toggle('active', i === newIdx));
                    }
                }, { passive: true });
            }
        };
        window.addEventListener('DOMContentLoaded', () => Hub.init());
    </script>
</body>
</html>
