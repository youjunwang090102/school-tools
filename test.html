<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ç­ç´šæ•¸ä½å¹³å° Ultimate v4.0</title>

    <meta name="theme-color" id="meta-theme-color" content="#0f172a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <style>
        /* * ğŸ¨ CSS æ¬Šå¨æ ¸å¿ƒ (The Authority Core CSS)
         * è¨­è¨ˆç†å¿µï¼šTech-Zen (ç§‘æŠ€ç¦ª)
         * ç‰¹æ€§ï¼šè®Šæ•¸é©…å‹•ã€å…¨æ¯ç»ç’ƒã€ç‰©ç†å›é¥‹
         */
        :root {
            /* --- ä½¿ç”¨è€…å¯è‡ªå®šç¾©çš„è®Šæ•¸ (Dynamic Variables) --- */
            --hue: 220; /* åŸºç¤è‰²ç›¸ (è—) */
            --sat: 90%; /* é£½å’Œåº¦ */
            --blur-strength: 20px; /* ç»ç’ƒæ¨¡ç³Šåº¦ */
            --font-scale: 1; /* å­—é«”ç¸®æ”¾ */

            /* --- è¡ç”Ÿè‰²ç¥¨ (Derived Palette) --- */
            --primary: hsl(var(--hue), var(--sat), 60%);
            --primary-glow: hsl(var(--hue), 100%, 75%);
            --primary-dim: hsla(var(--hue), var(--sat), 60%, 0.1);
            
            --bg-deep: #0f172a;
            --bg-surface: #1e293b;
            --text-main: #f8fafc;
            --text-sub: #94a3b8;
            
            --glass-bg: rgba(30, 41, 59, 0.7);
            --glass-border: rgba(255, 255, 255, 0.1);
            --glass-shine: rgba(255, 255, 255, 0.05);

            --ease-elastic: cubic-bezier(0.34, 1.56, 0.64, 1);
            --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
            
            --safe-bottom: env(safe-area-inset-bottom, 20px);
            --header-h: 70px;
        }

        /* æ·ºè‰²æ¨¡å¼è¦†å¯« (Light Mode Overrides) */
        [data-theme="light"] {
            --bg-deep: #f0f4f8;
            --bg-surface: #ffffff;
            --text-main: #1e293b;
            --text-sub: #64748b;
            --glass-bg: rgba(255, 255, 255, 0.75);
            --glass-border: rgba(0, 0, 0, 0.06);
            --glass-shine: rgba(255, 255, 255, 0.4);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        
        body {
            margin: 0; padding: 0;
            background-color: var(--bg-deep);
            color: var(--text-main);
            font-family: 'PingFang TC', 'SF Pro Display', system-ui, sans-serif;
            font-size: calc(16px * var(--font-scale));
            overflow: hidden; /* ç”±å…§éƒ¨å®¹å™¨è™•ç†æ»¾å‹• */
            transition: background-color 0.5s var(--ease-smooth);
            background-image: 
                radial-gradient(circle at 10% 20%, hsla(var(--hue), 80%, 50%, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, hsla(calc(var(--hue) + 40), 80%, 50%, 0.15) 0%, transparent 40%);
        }

        /* === âœ¨ UI å…ƒä»¶ï¼šå…¨æ¯ç»ç’ƒ === */
        .glass-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(var(--blur-strength));
            -webkit-backdrop-filter: blur(var(--blur-strength));
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.1);
        }

        /* === ğŸ“¢ Banner === */
        .system-banner {
            position: fixed; top: 0; width: 100%; z-index: 2000;
            background: linear-gradient(90deg, var(--primary), hsla(var(--hue), 80%, 40%, 1));
            color: #fff; font-size: 0.8rem; font-weight: 700;
            text-align: center; padding: 6px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transform: translateY(0); transition: transform 0.3s;
        }
        .system-banner.hidden { transform: translateY(-100%); }

        /* === ğŸ§Š Header === */
        header {
            position: fixed; top: 0; left: 0; right: 0;
            height: var(--header-h); padding: 0 20px; margin-top: 25px; /* é¿é–‹ banner */
            display: flex; justify-content: space-between; align-items: center;
            z-index: 1000; transition: all 0.3s;
        }
        header::after { /* æ¼¸å±¤é®ç½©ï¼Œå–ä»£ç”Ÿç¡¬çš„ border */
            content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 1px;
            background: linear-gradient(90deg, transparent, var(--glass-border), transparent);
        }
        
        .brand { display: flex; flex-direction: column; }
        .brand h1 { margin: 0; font-size: 1.25rem; font-weight: 800; letter-spacing: -0.5px; background: linear-gradient(135deg, var(--text-main), var(--primary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .brand span { font-size: 0.65rem; color: var(--text-sub); letter-spacing: 2px; text-transform: uppercase; font-weight: 700; }

        /* === ğŸ›  å·¥å…·åˆ— (Tools) === */
        .toolbar { display: flex; gap: 10px; }
        .tool-btn {
            width: 40px; height: 40px; border-radius: 12px; border: none;
            background: var(--glass-bg); border: 1px solid var(--glass-border);
            color: var(--text-main); display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: all 0.2s var(--ease-elastic);
            position: relative; overflow: hidden;
        }
        .tool-btn:active { transform: scale(0.9); }
        .tool-btn.active { background: var(--primary); color: #fff; border-color: var(--primary); box-shadow: 0 0 15px var(--primary-dim); }
        
        /* æ¼£æ¼ªç‰¹æ•ˆ */
        .ripple {
            position: absolute; border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: scale(0); animation: ripple 0.6s linear; pointer-events: none;
        }
        @keyframes ripple { to { transform: scale(4); opacity: 0; } }

        /* === ğŸ“º ä¸»è¦–çª— (Viewport) === */
        .viewport-container {
            position: absolute; top: calc(var(--header-h) + 30px); bottom: 80px; width: 100%;
            overflow-x: auto; overflow-y: hidden;
            display: flex; scroll-snap-type: x mandatory;
            scrollbar-width: none;
        }
        .viewport-container::-webkit-scrollbar { display: none; }

        .page-section {
            flex: 0 0 100%; width: 100%; height: 100%;
            scroll-snap-align: start;
            padding: 10px 20px 100px;
            overflow-y: auto; opacity: 1; transition: opacity 0.3s;
        }
        /* æ»¾å‹•æ™‚å¾®æ·¡å‡ºæ•ˆæœ */
        .viewport-container.scrolling .page-section { opacity: 0.5; pointer-events: none; }

        /* === ğŸƒ æ™ºèƒ½å¡ç‰‡ (Smart Cards) === */
        .grid-engine {
            display: grid; gap: 20px;
            width: 100%; max-width: 1000px; margin: 0 auto;
            transition: all 0.5s var(--ease-elastic);
        }
        
        /* List Mode */
        [data-layout="list"] .grid-engine { grid-template-columns: 1fr; }
        [data-layout="list"] .grid-engine { grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); }
        
        /* Grid Mode */
        [data-layout="grid"] .grid-engine { grid-template-columns: repeat(3, 1fr); gap: 12px; }
        [data-layout="grid"] .smart-card .card-desc { display: none; }
        [data-layout="grid"] .smart-card { flex-direction: column; aspect-ratio: 1/1; justify-content: center; padding: 10px; }
        [data-layout="grid"] .card-icon { margin: 0 0 8px 0; width: 44px; height: 44px; font-size: 1.4rem; }
        [data-layout="grid"] .card-title { font-size: 0.85rem; text-align: center; }

        .smart-card {
            position: relative; text-decoration: none;
            background: var(--bg-surface);
            border: 1px solid var(--glass-border);
            border-radius: 24px; padding: 20px;
            display: flex; align-items: center; gap: 18px;
            transition: transform 0.1s, box-shadow 0.3s;
            transform-style: preserve-3d; /* 3D æ•ˆæœé—œéµ */
            perspective: 1000px;
        }
        /* 3D é«˜å…‰å±¤ */
        .smart-card::before {
            content: ''; position: absolute; inset: 0; border-radius: 24px;
            background: linear-gradient(120deg, transparent 20%, var(--glass-shine) 50%, transparent 80%);
            opacity: 0; transition: opacity 0.3s; pointer-events: none;
        }
        .smart-card:hover::before { opacity: 1; }
        
        .card-icon {
            width: 54px; height: 54px; border-radius: 16px;
            background: var(--primary-dim); color: var(--primary);
            display: flex; align-items: center; justify-content: center;
            font-size: 1.6rem; transition: all 0.3s;
            box-shadow: inset 0 0 0 1px rgba(var(--hue), 255, 255, 0.1);
        }
        
        .card-text { flex: 1; }
        .card-title { margin: 0; font-size: 1.05rem; font-weight: 700; color: var(--text-main); }
        .card-desc { margin: 4px 0 0; font-size: 0.8rem; color: var(--text-sub); }

        /* === ğŸ§­ æ‡¸æµ®å°èˆª (Floating Dock) === */
        .dock-container {
            position: fixed; bottom: calc(15px + var(--safe-bottom)); left: 50%;
            transform: translateX(-50%); width: 90%; max-width: 400px; z-index: 4000;
        }
        .glass-dock {
            display: flex; padding: 5px; border-radius: 100px;
            background: var(--nav-bg); backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 10px 40px -10px rgba(0,0,0,0.3);
        }
        .dock-item {
            flex: 1; text-align: center; padding: 12px 0;
            font-size: 0.9rem; font-weight: 600; color: var(--text-sub);
            border-radius: 100px; cursor: pointer; position: relative;
            transition: color 0.3s;
        }
        /* å°èˆªé¸ä¸­æŒ‡ç¤ºå™¨ (æ»‘å‹•è† å›Š) */
        .dock-indicator {
            position: absolute; top: 5px; bottom: 5px; left: 0; width: 25%;
            background: var(--primary); border-radius: 100px;
            z-index: -1; transition: transform 0.4s var(--ease-elastic);
            box-shadow: 0 4px 12px var(--primary-dim);
        }
        .dock-item.active { color: #fff; }

        /* === âš™ï¸ æ§åˆ¶ä¸­å¿ƒæŠ½å±œ (Settings Drawer) === */
        .drawer-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.6);
            backdrop-filter: blur(5px); z-index: 5000;
            opacity: 0; pointer-events: none; transition: opacity 0.3s;
        }
        .drawer-overlay.open { opacity: 1; pointer-events: auto; }
        
        .settings-drawer {
            position: absolute; bottom: 0; left: 0; width: 100%;
            background: var(--bg-deep);
            border-top-left-radius: 30px; border-top-right-radius: 30px;
            padding: 30px; transform: translateY(100%);
            transition: transform 0.4s var(--ease-elastic);
            border-top: 1px solid var(--glass-border);
        }
        .drawer-overlay.open .settings-drawer { transform: translateY(0); }

        .drawer-handle {
            width: 40px; height: 5px; background: var(--text-sub); opacity: 0.3;
            border-radius: 10px; margin: -10px auto 20px;
        }

        .setting-group { margin-bottom: 25px; }
        .setting-label { display: block; font-size: 0.9rem; font-weight: 700; color: var(--text-main); margin-bottom: 12px; }
        
        /* ç‚«å½©æ»‘æ¡¿ */
        input[type="range"] {
            width: 100%; appearance: none; height: 6px; border-radius: 10px;
            background: var(--bg-surface); outline: none;
        }
        input[type="range"]::-webkit-slider-thumb {
            appearance: none; width: 22px; height: 22px; border-radius: 50%;
            background: var(--primary); border: 2px solid #fff;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2); cursor: pointer;
            transition: transform 0.1s;
        }
        input[type="range"]::-webkit-slider-thumb:active { transform: scale(1.2); }

        /* === ğŸ Toast é€šçŸ¥ === */
        .toast-container {
            position: fixed; top: 110px; left: 50%; transform: translateX(-50%);
            z-index: 6000; pointer-events: none;
        }
        .toast {
            background: var(--bg-surface); color: var(--text-main);
            padding: 10px 20px; border-radius: 50px;
            font-size: 0.9rem; font-weight: 600;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            display: flex; align-items: center; gap: 8px;
            border: 1px solid var(--glass-border);
            margin-bottom: 10px;
            animation: toastIn 0.4s var(--ease-elastic);
        }
        @keyframes toastIn { from { opacity: 0; transform: translateY(-20px) scale(0.9); } to { opacity: 1; transform: translateY(0) scale(1); } }

        /* SVG Icons */
        svg { width: 20px; height: 20px; fill: none; stroke: currentColor; stroke-width: 2; stroke-linecap: round; stroke-linejoin: round; }
    </style>
</head>
<body data-layout="list" data-theme="dark">

    <div class="system-banner" id="sys-banner">
        ğŸš€ è¨±é¡˜æ± ç³»çµ±è² è¼‰è¼ƒé«˜ï¼Œè«‹ç¨å€™å†è©¦ã€‚
    </div>

    <header class="glass-panel" style="background:transparent; border:none; box-shadow:none;">
        <div class="brand">
            <h1>ç­ç´šæ•¸ä½å¹³å°</h1>
            <span>DIGITAL HUB v4.0</span>
        </div>
        <div class="toolbar">
            <button class="tool-btn" id="btn-layout" onclick="SysCore.toggleLayout()">
                <svg viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>
            </button>
            <button class="tool-btn" onclick="SysCore.toggleSettings(true)">
                <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
            </button>
            <button class="tool-btn" onclick="SysCore.showAbout()">
                <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>
            </button>
        </div>
    </header>

    <main class="viewport-container" id="main-scroller">
        
        <section class="page-section">
            <div class="grid-engine">
                <a href="è¡Œäº‹æ›†/index.html" class="smart-card" data-tilt>
                    <div class="card-icon">ğŸ“…</div>
                    <div class="card-text"><h2 class="card-title">ç­ç´šè¡Œäº‹æ›†</h2><p class="card-desc">æŒæ¡è€ƒç¨‹èˆ‡é‡è¦æ´»å‹•ä¸æ¼æ¥</p></div>
                </a>
                <a href="countdown/index.html" class="smart-card" data-tilt>
                    <div class="card-icon">â³</div>
                    <div class="card-text"><h2 class="card-title">è€ƒç¨‹å€’æ•¸</h2><p class="card-desc">è·é›¢æ®µè€ƒèˆ‡çµ±æ¸¬é‚„æœ‰å¤šä¹…ï¼Ÿ</p></div>
                </a>
                <a href="homework/index.html" class="smart-card" data-tilt>
                    <div class="card-icon">ğŸ“’</div>
                    <div class="card-text"><h2 class="card-title">ä½œæ¥­å¾…è¾¦</h2><p class="card-desc">å³æ™‚æŸ¥çœ‹ä½œæ¥­æ¸…å–®èˆ‡ç¹³äº¤æœŸé™</p></div>
                </a>
            </div>
        </section>

        <section class="page-section">
            <div class="grid-engine">
                <a href="help/student.html" class="smart-card" data-tilt>
                    <div class="card-icon">ğŸŒ±</div>
                    <div class="card-text"><h2 class="card-title">åŒ¿åæ±‚åŠ©</h2><p class="card-desc">å‘å°å¸«å‚³é€åŒ¿åè¨Šæ¯æ±‚åŠ©</p></div>
                </a>
                <a href="unknownmail/index.html" class="smart-card" data-tilt>
                    <div class="card-icon">âœ‰ï¸</div>
                    <div class="card-text"><h2 class="card-title">åŒ¿åä¿¡ç®±</h2><p class="card-desc">æº«é¦¨æé†’åŒå­¸ï¼Œé¿å…å°·å°¬</p></div>
                </a>
                <a href="åŒ¿å/index.html" class="smart-card" data-tilt>
                    <div class="card-icon">âœ¨</div>
                    <div class="card-text"><h2 class="card-title">è¨±é¡˜æ± </h2><p class="card-desc">è®“ç­ç´šè®Šå¾—æ›´ç¾å¥½çš„é»å­</p></div>
                </a>
                <a href="board/index.html" class="smart-card" data-tilt>
                    <div class="card-icon">ğŸ’¬</div>
                    <div class="card-text"><h2 class="card-title">ç•™è¨€æ¿</h2><p class="card-desc">å¯¦åç•™ä¸‹ä½ æƒ³å°å¤§å®¶èªªçš„è©±</p></div>
                </a>
            </div>
        </section>

        <section class="page-section">
            <div class="grid-engine">
                <a href="cleaning/index.html" class="smart-card" data-tilt>
                    <div class="card-icon">ğŸ§¹</div>
                    <div class="card-text"><h2 class="card-title">æ‰“æƒå‹¤å‹™</h2><p class="card-desc">æƒå€é…ç½®èˆ‡æœªæƒç™»è¨˜é»æ•¸</p></div>
                </a>
                <a href="seating/index.html" class="smart-card" data-tilt>
                    <div class="card-icon">ğŸª‘</div>
                    <div class="card-text"><h2 class="card-title">é¸ä½ç³»çµ±</h2><p class="card-desc">åˆºæ¿€çš„éš¨æ©Ÿé¸ä½èˆ‡åº§ä½è¡¨ç”Ÿæˆ</p></div>
                </a>
                <a href="vote/index.html" class="smart-card" data-tilt>
                    <div class="card-icon">ğŸ—³ï¸</div>
                    <div class="card-text"><h2 class="card-title">æ•¸ä½æŠ•ç¥¨</h2><p class="card-desc">å…¬å¹³ã€å³æ™‚çš„ç­ç´šäº‹å‹™è¡¨æ±º</p></div>
                </a>
                <a href="grouping/index.html" class="smart-card" data-tilt>
                    <div class="card-icon">ğŸ²</div>
                    <div class="card-text"><h2 class="card-title">éš¨æ©Ÿåˆ†çµ„</h2><p class="card-desc">æ¼”ç®—æ³•è¼”åŠ©çš„å¿«é€Ÿåˆ†çµ„</p></div>
                </a>
            </div>
        </section>

        <section class="page-section">
            <div class="grid-engine">
                <a href="exam_calc/index.html" class="smart-card" data-tilt>
                    <div class="card-icon">ğŸ“</div>
                    <div class="card-text"><h2 class="card-title">æ®µè€ƒè¨ˆç®—æ©Ÿ</h2><p class="card-desc">è¨ˆç®—åŠ æ¬Šå¹³å‡èˆ‡é æ¸¬ç¸½åˆ†</p></div>
                </a>
                <a href="final_calc/index.html" class="smart-card" data-tilt>
                    <div class="card-icon">ğŸ“ˆ</div>
                    <div class="card-text"><h2 class="card-title">å­¸æœŸçµç®—</h2><p class="card-desc">å­¸åˆ†è©¦ç®—ï¼šé€šéã€è£œè€ƒèˆ‡é‡ä¿®</p></div>
                </a>
            </div>
        </section>
    </main>

    <nav class="dock-container">
        <div class="glass-dock">
            <div class="dock-indicator" id="dock-highlight"></div>
            <div class="dock-item active" onclick="SysCore.navTo(0)">æé†’</div>
            <div class="dock-item" onclick="SysCore.navTo(1)">äº’å‹•</div>
            <div class="dock-item" onclick="SysCore.navTo(2)">ç­å‹™</div>
            <div class="dock-item" onclick="SysCore.navTo(3)">æˆç¸¾</div>
        </div>
    </nav>

    <div class="drawer-overlay" id="settings-overlay" onclick="if(event.target===this) SysCore.toggleSettings(false)">
        <div class="settings-drawer">
            <div class="drawer-handle"></div>
            <h3 style="margin-top:0;">å€‹äººåŒ–æ§åˆ¶å°</h3>
            
            <div class="setting-group">
                <label class="setting-label">ä¸»é¡Œè‰²èª¿ (Theme Hue)</label>
                <input type="range" min="0" max="360" value="220" id="range-hue" oninput="SysCore.updateThemeVar('--hue', this.value)">
            </div>
            
            <div class="setting-group">
                <label class="setting-label">ç»ç’ƒæ¨¡ç³Šåº¦ (Glass Blur)</label>
                <input type="range" min="0" max="40" value="20" id="range-blur" oninput="SysCore.updateThemeVar('--blur-strength', this.value + 'px')">
            </div>

            <div class="setting-group" style="display:flex; justify-content:space-between; align-items:center;">
                <label class="setting-label" style="margin:0">æ·±è‰²æ¨¡å¼</label>
                <button class="tool-btn" id="btn-theme-toggle" onclick="SysCore.toggleDarkMode()" style="width:50px;">ğŸŒ™</button>
            </div>
        </div>
    </div>

    <div class="drawer-overlay" id="about-overlay" onclick="if(event.target===this) SysCore.closeAbout()">
        <div class="settings-drawer" style="text-align:center;">
            <div class="drawer-handle"></div>
            <div class="card-icon" style="margin:0 auto 15px; border-radius:50%;">ğŸ‘¨â€ğŸ’»</div>
            <h3 style="margin:0;">ç‹å®¥éˆ</h3>
            <p style="color:var(--text-sub); font-size:0.8rem;">Lead Developer</p>
            <div style="margin:20px 0; padding:15px; background:var(--bg-surface); border-radius:15px; text-align:left; font-size:0.85rem; color:var(--text-sub);">
                <strong>æœ€æ–°æ›´æ–° v4.0 (Ultimate):</strong><br>
                - å…¨æ–° Tech-Zen è¨­è¨ˆèªè¨€<br>
                - 3D å¡ç‰‡ç‰©ç†å‚¾æ–œå¼•æ“<br>
                - å€‹äººåŒ–è‰²å½©æ§åˆ¶å°<br>
                - ä¿®æ­£äº†æ‰€æœ‰å·²çŸ¥çš„æ»¾å‹•åç§» bug
            </div>
            <button class="tool-btn" style="width:100%; border-radius:30px; background:var(--primary); color:white;" onclick="SysCore.closeAbout()">é—œé–‰</button>
        </div>
    </div>

    <div class="toast-container" id="toast-area"></div>

    <script>
        /**
         * ğŸ§  SysCore: The Authority Logic Class
         * å–ä»£æ•£äº‚çš„ functionï¼Œæ”¹ç”¨å–®ä¾‹æ¨¡å¼ç®¡ç†
         */
        class SystemCore {
            constructor() {
                this.dom = {
                    scroller: document.getElementById('main-scroller'),
                    dockHighlight: document.getElementById('dock-highlight'),
                    dockItems: document.querySelectorAll('.dock-item'),
                    root: document.documentElement
                };
                
                this.state = {
                    pageIndex: parseInt(localStorage.getItem('pageIdx')) || 0,
                    layout: localStorage.getItem('layout') || 'list',
                    hue: localStorage.getItem('hue') || 220,
                    isDark: localStorage.getItem('theme') !== 'light' // é è¨­ Dark
                };

                this.init();
            }

            init() {
                // 1. æ¢å¾©ç‹€æ…‹
                this.applyTheme();
                this.dom.root.setAttribute('data-layout', this.state.layout);
                document.getElementById('range-hue').value = this.state.hue;

                // 2. åˆå§‹åŒ–æ»¾å‹•ç›£è½ (ä½¿ç”¨é˜²æŠ–)
                let scrollTimeout;
                this.dom.scroller.addEventListener('scroll', () => {
                    this.dom.scroller.classList.add('scrolling');
                    clearTimeout(scrollTimeout);
                    scrollTimeout = setTimeout(() => {
                        this.dom.scroller.classList.remove('scrolling');
                        this.updatePageIndex();
                    }, 50);
                }, { passive: true });

                // 3. ç¶å®šæŒ‰éˆ•æ¼£æ¼ªæ•ˆæœ
                document.querySelectorAll('.tool-btn, .smart-card, .dock-item').forEach(el => {
                    el.addEventListener('click', this.createRipple);
                });

                // 4. å•Ÿå‹• 3D å¡ç‰‡å¼•æ“
                this.initTiltEffect();

                // 5. å®šä½é é¢
                setTimeout(() => this.navTo(this.state.pageIndex, false), 100);
            }

            // --- å°èˆªé‚è¼¯ ---
            navTo(index, smooth = true) {
                const width = this.dom.scroller.offsetWidth;
                this.dom.scroller.scrollTo({
                    left: width * index,
                    behavior: smooth ? 'smooth' : 'auto'
                });
                this.updateDock(index);
                this.state.pageIndex = index;
                localStorage.setItem('pageIdx', index);
            }

            updatePageIndex() {
                const index = Math.round(this.dom.scroller.scrollLeft / this.dom.scroller.offsetWidth);
                if (this.state.pageIndex !== index) {
                    this.state.pageIndex = index;
                    this.updateDock(index);
                    localStorage.setItem('pageIdx', index);
                }
            }

            updateDock(index) {
                // ç§»å‹•è† å›ŠæŒ‡ç¤ºå™¨
                this.dom.dockHighlight.style.transform = `translateX(${index * 100}%)`;
                this.dom.dockItems.forEach((item, i) => {
                    item.classList.toggle('active', i === index);
                });
            }

            // --- è¦–è¦ºé‚è¼¯ ---
            toggleLayout() {
                this.state.layout = this.state.layout === 'list' ? 'grid' : 'list';
                this.dom.root.setAttribute('data-layout', this.state.layout);
                localStorage.setItem('layout', this.state.layout);
                this.toast(`å·²åˆ‡æ›è‡³ ${this.state.layout === 'list' ? 'åˆ—è¡¨' : 'æ ¼ç‹€'}æª¢è¦–`);
            }

            toggleDarkMode() {
                this.state.isDark = !this.state.isDark;
                this.applyTheme();
                localStorage.setItem('theme', this.state.isDark ? 'dark' : 'light');
            }

            applyTheme() {
                this.dom.root.setAttribute('data-theme', this.state.isDark ? 'dark' : 'light');
                this.dom.root.style.setProperty('--hue', this.state.hue);
                document.getElementById('meta-theme-color').content = this.state.isDark ? '#0f172a' : '#f0f4f8';
                document.getElementById('btn-theme-toggle').innerText = this.state.isDark ? 'ğŸŒ™' : 'â˜€ï¸';
            }

            updateThemeVar(cssVar, value) {
                this.dom.root.style.setProperty(cssVar, value);
                if (cssVar === '--hue') {
                    this.state.hue = value;
                    localStorage.setItem('hue', value);
                }
            }

            toggleSettings(show) {
                const overlay = document.getElementById('settings-overlay');
                show ? overlay.classList.add('open') : overlay.classList.remove('open');
            }

            showAbout() { document.getElementById('about-overlay').classList.add('open'); }
            closeAbout() { document.getElementById('about-overlay').classList.remove('open'); }

            // --- å¾®äº’å‹•ç‰¹æ•ˆ (Micro-interactions) ---
            createRipple(e) {
                const button = e.currentTarget;
                const circle = document.createElement("span");
                const diameter = Math.max(button.clientWidth, button.clientHeight);
                const radius = diameter / 2;
                
                // ä¿®æ­£åº§æ¨™è¨ˆç®—
                const rect = button.getBoundingClientRect();
                circle.style.width = circle.style.height = `${diameter}px`;
                circle.style.left = `${e.clientX - rect.left - radius}px`;
                circle.style.top = `${e.clientY - rect.top - radius}px`;
                circle.classList.add("ripple");
                
                const existing = button.getElementsByClassName("ripple")[0];
                if (existing) existing.remove();
                
                button.appendChild(circle);
            }

            initTiltEffect() {
                // ç°¡å–®çš„ 3D å‚¾æ–œæ•ˆæœ (åƒ…åœ¨éè§¸æ§è£ç½®æˆ–å¤§è¢å¹•å•Ÿç”¨ä»¥ç¯€çœæ•ˆèƒ½)
                if (window.matchMedia("(pointer: fine)").matches) {
                    document.querySelectorAll('.smart-card').forEach(card => {
                        card.addEventListener('mousemove', (e) => {
                            const rect = card.getBoundingClientRect();
                            const x = e.clientX - rect.left;
                            const y = e.clientY - rect.top;
                            const centerX = rect.width / 2;
                            const centerY = rect.height / 2;
                            
                            const rotateX = ((y - centerY) / centerY) * -5; // é™åˆ¶è§’åº¦
                            const rotateY = ((x - centerX) / centerX) * 5;

                            card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.02)`;
                        });

                        card.addEventListener('mouseleave', () => {
                            card.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) scale(1)';
                        });
                    });
                }
            }

            toast(msg) {
                const container = document.getElementById('toast-area');
                const el = document.createElement('div');
                el.className = 'toast';
                el.innerHTML = `<span>â„¹ï¸</span> ${msg}`;
                container.appendChild(el);
                setTimeout(() => {
                    el.style.opacity = '0';
                    el.style.transform = 'translateY(-20px)';
                    setTimeout(() => el.remove(), 300);
                }, 2000);
            }
        }

        // ğŸš€ å•Ÿå‹•ç³»çµ±
        const SysCore = new SystemCore();
    </script>
</body>
</html>
