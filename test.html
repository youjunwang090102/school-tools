<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>é½’è¼ªæ’¥æ¡¿å¯¦é©—å®¤</title>
    <style>
        body { margin: 0; background: #0f172a; color: white; font-family: sans-serif; overflow: hidden; }
        
        /* æ»¾è¼ªå®¹å™¨ */
        .scroller {
            display: flex; width: 100vw; height: 70dvh;
            overflow-x: auto; scroll-snap-type: x mandatory;
            scrollbar-width: none;
        }
        .scroller::-webkit-scrollbar { display: none; }

        .page {
            flex: 0 0 100vw; height: 100%;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        
        .card {
            width: 80%; height: 60%; background: #1e293b; border-radius: 40px;
            border: 2px solid #334155; display: flex; align-items: center; justify-content: center;
            font-size: 100px; box-shadow: 0 20px 50px rgba(0,0,0,0.3);
        }

        /* æ¨¡æ“¬åˆ»åº¦ç·š */
        .ruler {
            position: fixed; bottom: 150px; width: 100%; height: 40px;
            display: flex; justify-content: center; align-items: flex-end; gap: 15px;
        }
        .tick { width: 3px; height: 10px; background: #475569; border-radius: 2px; transition: 0.1s; }
        .tick.active { height: 25px; background: #fbbf24; box-shadow: 0 0 10px #fbbf24; }

        .hint { text-align: center; padding: 40px; color: #94a3b8; font-size: 14px; }
    </style>
</head>
<body>

    <div class="hint">è«‹å…ˆã€Œé»æ“Šè¢å¹•ã€è§£é–é½’è¼ªè²<br>ç„¶å¾Œå¿«é€Ÿå·¦å³æ»‘å‹•å¡ç‰‡</div>

    <div class="scroller" id="gear-box">
        <div class="page"><div class="card">1</div></div>
        <div class="page"><div class="card">2</div></div>
        <div class="page"><div class="card">3</div></div>
        <div class="page"><div class="card">4</div></div>
        <div class="page"><div class="card">5</div></div>
    </div>

    <div class="ruler" id="ruler"></div>

    <script>
        /**
         * ğŸ§ é½’è¼ªç‰©ç†éŸ³é »åˆæˆå™¨
         */
        const GearSound = {
            ctx: new (window.AudioContext || window.webkitAudioContext)(),
            
            // ç”¢ç”Ÿæ¸…è„†çš„ã€Œå—²ã€è²
            click: function() {
                if (this.ctx.state === 'suspended') this.ctx.resume();

                const osc = this.ctx.createOscillator();
                const gain = this.ctx.createGain();
                const filter = this.ctx.createBiquadFilter();

                // æ¨¡æ“¬é‡‘å±¬æ’¥æ¡¿çš„é«˜é »ç‰¹å¾µ
                osc.type = 'triangle'; 
                osc.frequency.setValueAtTime(2500, this.ctx.currentTime); // èµ·å§‹é«˜é »
                osc.frequency.exponentialRampToValueAtTime(400, this.ctx.currentTime + 0.04);

                // å¿«é€Ÿè¡°æ¸›çš„éŸ³é‡æ§åˆ¶ (ç”¢ç”Ÿã€Œå—²ã€çš„çŸ­ä¿ƒæ„Ÿ)
                gain.gain.setValueAtTime(0.15, this.ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + 0.04);

                // é«˜é€šæ¿¾æ³¢å™¨ï¼šç§»é™¤ä½é »é›œéŸ³ï¼Œåªä¿ç•™æ¸…è„†è²
                filter.type = "highpass";
                filter.frequency.value = 1500;

                osc.connect(filter);
                filter.connect(gain);
                gain.connect(this.ctx.destination);

                osc.start();
                osc.stop(this.ctx.currentTime + 0.04);
            }
        };

        // åˆå§‹åŒ–åˆ»åº¦ UI
        const ruler = document.getElementById('ruler');
        for(let i=0; i<5; i++) {
            const tick = document.createElement('div');
            tick.className = 'tick';
            ruler.appendChild(tick);
        }

        const scroller = document.getElementById('gear-box');
        let lastIdx = 0;

        // ç›£è½æ»¾å‹•ä½ç½®
        scroller.addEventListener('scroll', () => {
            const width = window.innerWidth;
            const currentIdx = Math.round(scroller.scrollLeft / width);

            // ç•¶æŒ‡é‡è·¨éåˆ»åº¦æ™‚è§¸ç™¼
            if (currentIdx !== lastIdx) {
                GearSound.click(); // ğŸ”Š ç™¼å‡ºå—²å—²è²
                
                // æ›´æ–°åˆ»åº¦è¦–è¦º
                const ticks = document.querySelectorAll('.tick');
                ticks.forEach((t, i) => t.classList.toggle('active', i === currentIdx));
                
                lastIdx = currentIdx;
            }
        }, { passive: true });

        // è§£é–éŸ³è¨Š
        document.body.addEventListener('touchstart', () => {
            GearSound.click();
            console.log("é½’è¼ªé‹è½‰ä¸­...");
        }, { once: true });
    </script>
</body>
</html>
