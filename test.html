<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ç­ç´šæ•¸ä½å¹³å° 15.0 æ——è‰¦ç‰ˆ</title>
    
    <meta name="theme-color" id="theme-meta" content="#f8fafc">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">

    <script>
        const GLOBAL_ANNOUNCEMENT = "ğŸ“¢ 15.0 æ——è‰¦ä¿®å¾©ï¼šå·²è§£æ±ºé‡æ–°æ•´ç†è·³å‹•å•é¡Œã€ç‹€æ…‹åˆ—åŒæ­¥å»¶é²èˆ‡è¦–çª—é¡¯ç¤ºå•é¡Œã€‚";
        
        const AUTHOR_CONFIG = {
            name: "ç‹å®¥éˆ",
            role: "æ ¸å¿ƒç³»çµ±æ¶æ§‹å¸« / Lead Developer",
            version: "v15.0.5-Stable",
            logs: [
                "æ ¸å¿ƒï¼šè§£æ±ºé‡æ–°æ•´ç†å¾Œé é¢æœƒå¾ç¬¬ä¸€é æ»‘å‹•åˆ°ç›®æ¨™é çš„è¦–è¦ºè·³å‹•ã€‚",
                "åŒæ­¥ï¼šå„ªåŒ–æ‰‹æ©Ÿç¶²å€åˆ—èˆ‡ç‹€æ…‹åˆ—é¡è‰²åŒæ­¥ï¼Œé”æˆé»æ“Šå³è®Šè‰²ã€‚",
                "ä»‹é¢ï¼šè³‡è¨Šè¦–çª—(Information)å…¨é¢å°å‹åŒ–ï¼Œé©é…æ‰€æœ‰æ‰‹æ©Ÿè¢å¹•ã€‚",
                "ä½ˆå±€ï¼šç¢ºä¿é›»è…¦ç‰ˆ(3/6æ¬„)èˆ‡æ‰‹æ©Ÿç‰ˆ(1/3æ¬„)é¡¯ç¤ºç©©å®šã€‚",
                "å­˜å„²ï¼šå®Œå–„ localStorage ç‹€æ…‹é–å®šæ©Ÿåˆ¶ã€‚"
            ]
        };
    </script>

    <script>
        (function() {
            const theme = localStorage.getItem('theme') || 'light';
            const layout = localStorage.getItem('layout') || 'list-mode';
            if (theme === 'dark') document.documentElement.classList.add('dark-mode');
            document.documentElement.setAttribute('data-layout', layout);
        })();
    </script>

    <style>
        /* --- è®Šæ•¸èˆ‡åŸºç¤ --- */
        :root {
            --p: #4361ee; --bg: #f8fafc; --card: #ffffff; --text: #0f172a;
            --sub: #64748b; --border: #e2e8f0; --nav-bg: rgba(255, 255, 255, 0.95);
            --safe-bottom: env(safe-area-inset-bottom, 20px);
        }
        .dark-mode {
            --bg: #020617; --card: #1e293b; --text: #f1f5f9;
            --sub: #94a3b8; --border: #334155; --nav-bg: rgba(15, 23, 42, 0.95);
        }

        html, body {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden !important; position: fixed;
            background: var(--bg); color: var(--text);
            font-family: 'PingFang TC', system-ui, -apple-system, sans-serif;
            transition: background-color 0.3s ease;
        }

        /* å…¬å‘Šæ©«å¹… */
        #ann-bar {
            background: #fee2e2; color: #991b1b; padding: 10px; font-size: 0.8rem;
            font-weight: 800; text-align: center; border-bottom: 1px solid var(--border);
            display: none; z-index: 10000;
        }
        .dark-mode #ann-bar { background: #450a0a; color: #fecaca; }

        /* Header */
        header {
            height: 65px; display: flex; align-items: center; justify-content: space-between;
            padding: 0 15px; background: var(--bg); border-bottom: 1px solid var(--border);
            z-index: 1000; position: relative;
        }
        .logo h1 { margin: 0; font-size: 1.1rem; color: var(--p); font-weight: 900; }
        .logo p { margin: 0; font-size: 0.6rem; color: var(--sub); font-weight: 700; letter-spacing: 1px; }

        .actions { display: flex; gap: 10px; align-items: center; }
        .sw-group { display: flex; background: var(--border); padding: 3px; border-radius: 10px; }
        .btn { border: none; background: transparent; cursor: pointer; display: flex; align-items: center; justify-content: center; color: var(--sub); }
        .sw-btn { width: 36px; height: 30px; border-radius: 7px; }
        .sw-btn.active { background: var(--card); color: var(--p); box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .circle-btn { width: 38px; height: 38px; background: var(--border); border-radius: 12px; color: var(--text); }
        .btn svg { width: 20px; height: 20px; fill: none; stroke: currentColor; stroke-width: 2.5; pointer-events: none; }

        /* ä¸»è¦æ²å‹•å€ */
        .scroller {
            display: flex; width: 100%; height: calc(100% - 65px);
            overflow-x: auto; overflow-y: hidden;
            scroll-snap-type: x mandatory; scrollbar-width: none;
            -webkit-overflow-scrolling: touch;
        }
        .scroller::-webkit-scrollbar { display: none; }
        .panel {
            flex: 0 0 100%; width: 100%; height: 100%;
            scroll-snap-align: start; overflow-y: auto;
            padding: 20px 15px 180px; box-sizing: border-box;
        }

        /* ç¶²æ ¼ç³»çµ± (è·¨è£ç½®é©é…) */
        .grid { display: grid; gap: 15px; width: 100%; max-width: 1200px; margin: 0 auto; }
        
        /* åˆ—è¡¨æ¨¡å¼ */
        [data-layout="list-mode"] .grid { grid-template-columns: 1fr; }
        @media (min-width: 1024px) { [data-layout="list-mode"] .grid { grid-template-columns: 1fr 1fr 1fr; } }
        
        /* æ–¹å¡Šæ¨¡å¼ */
        [data-layout="grid-mode"] .grid { grid-template-columns: repeat(3, 1fr); gap: 10px; }
        @media (min-width: 1024px) { [data-layout="grid-mode"] .grid { grid-template-columns: repeat(6, 1fr); } }

        .item { background: var(--card); border: 1px solid var(--border); border-radius: 18px; text-decoration: none; color: inherit; display: flex; transition: 0.2s; }
        .item:active { transform: scale(0.96); }

        [data-layout="list-mode"] .item { padding: 18px; align-items: center; }
        [data-layout="grid-mode"] .item { flex-direction: column; padding: 15px 5px; text-align: center; aspect-ratio: 1/1; justify-content: center; }
        
        .ibox { background: var(--bg); display: flex; align-items: center; justify-content: center; }
        [data-layout="list-mode"] .ibox { width: 46px; height: 46px; border-radius: 12px; margin-right: 15px; font-size: 1.3rem; }
        [data-layout="grid-mode"] .ibox { width: 40px; height: 40px; border-radius: 50%; margin: 0 auto 10px; font-size: 1.2rem; }
        
        .txt h2 { margin: 0; font-size: 1rem; font-weight: 800; }
        .txt p { margin: 4px 0 0; font-size: 0.75rem; color: var(--sub); }
        [data-layout="grid-mode"] .txt p { display: none; }

        /* åº•éƒ¨é¸å–® */
        .nav-fixed {
            position: fixed; bottom: calc(20px + var(--safe-bottom));
            left: 50%; transform: translateX(-50%);
            width: 90%; max-width: 420px; z-index: 9000;
        }
        .nav-inner {
            background: var(--nav-bg); backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            display: flex; padding: 6px; border-radius: 100px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        }
        .tab { flex: 1; text-align: center; padding: 14px 0; font-size: 0.9rem; font-weight: 800; color: #94a3b8; border-radius: 100px; cursor: pointer; transition: 0.2s; }
        .tab.active { color: white; background: var(--p); box-shadow: 0 5px 15px rgba(67, 97, 238, 0.3); }

        /* Information Modal (æ¥µè‡´é©é…ç‰ˆ) */
        .modal {
            position: fixed; inset: 0; background: rgba(0,0,0,0.85);
            backdrop-filter: blur(10px); z-index: 10000;
            display: none; align-items: center; justify-content: center; padding: 15px;
        }
        .modal.show { display: flex; }
        .modal-win {
            background: var(--bg); width: 100%; max-width: 320px;
            border-radius: 28px; overflow: hidden; animation: pop 0.4s cubic-bezier(0.17, 0.89, 0.32, 1.2);
        }
        .modal-top { background: linear-gradient(135deg, #4361ee, #7209b7); color: white; padding: 30px 20px; text-align: center; }
        .modal-body { padding: 20px; }
        .log-area { margin: 15px 0; padding: 0; list-style: none; border-top: 1px solid var(--border); padding-top: 12px; max-height: 160px; overflow-y: auto; }
        .log-area li { font-size: 0.8rem; color: var(--sub); padding: 5px 0; line-height: 1.4; }
        .close-btn { width: 100%; padding: 14px; background: var(--text); color: var(--bg); border: none; border-radius: 18px; font-weight: 900; cursor: pointer; }

        @keyframes pop { from { opacity: 0; transform: scale(0.8) translateY(20px); } to { opacity: 1; transform: scale(1) translateY(0); } }
    </style>
</head>
<body data-layout="list-mode">

    <div id="ann-bar"></div>

    <header>
        <div class="logo">
            <h1>ç­ç´šæ•¸ä½å¹³å°</h1>
            <p>CLASSROOM ELITE v15</p>
        </div>
        <div class="actions">
            <div class="sw-group">
                <button class="btn sw-btn" id="list-btn" onclick="setLayout('list-mode')">
                    <svg viewBox="0 0 24 24"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><path d="M3 6h.01M3 12h.01M3 18h.01"/></svg>
                </button>
                <button class="btn sw-btn" id="grid-btn" onclick="setLayout('grid-mode')">
                    <svg viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg>
                </button>
            </div>
            <button class="btn circle-btn" onclick="toggleTheme()">
                <svg id="theme-icon" viewBox="0 0 24 24"></svg>
            </button>
            <button class="btn circle-btn" onclick="toggleModal(true)">
                <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke-opacity="0.3"></circle><path d="M12 11v6"></path><circle cx="12" cy="7.5" r="1.2" fill="currentColor" stroke="none"></circle></svg>
            </button>
        </div>
    </header>

    <main class="scroller" id="scroller">
        <section class="panel"><div class="grid">
            <a href="è¡Œäº‹æ›†/index.html" class="item"><div class="ibox">ğŸ“…</div><div class="txt"><h2>ç­ç´šè¡Œäº‹æ›†</h2><p>æŒæ¡é‡è¦æ™‚ç¨‹ä¸æ¼æ¥</p></div></a>
            <a href="countdown/index.html" class="item"><div class="ibox">â³</div><div class="txt"><h2>è€ƒç¨‹å€’æ•¸</h2><p>æˆ°é¬¥æ™‚åˆ»ï¼Œç²¾ç¢ºå€’è¨ˆ</p></div></a>
            <a href="homework/index.html" class="item"><div class="ibox">ğŸ“’</div><div class="txt"><h2>ä½œæ¥­å½™æ•´</h2><p>æ¯æ—¥ä½œæ¥­æ¸…å–®æ›´æ–°</p></div></a>
        </div></section>
        <section class="panel"><div class="grid">
            <a href="help/student.html" class="item"><div class="ibox">ğŸŒ±</div><div class="txt"><h2>å¿ƒè²è«®è©¢</h2><p>æº«å’Œå‚¾è½ä½ çš„æƒ³æ³•</p></div></a>
            <a href="unknownmail/index.html" class="item"><div class="ibox">ãŠ™ï¸</div><div class="txt"><h2>åŠ å¯†ä¿¡ç®±</h2><p>å®‰å…¨è¨Šæ¯å‚³é</p></div></a>
            <a href="åŒ¿å/index.html" class="item"><div class="ibox">âœ¨</div><div class="txt"><h2>åŒ¿åè¨±é¡˜æ± </h2><p>äº’å‹•å¤©åœ°</p></div></a>
            <a href="board/index.html" class="item"><div class="ibox">ğŸ’¬</div><div class="txt"><h2>å…¬å‹™è¨è«–å€</h2><p>åƒèˆ‡æ±ºç­–</p></div></a>
        </div></section>
        <section class="panel"><div class="grid">
            <a href="cleaning/index.html" class="item"><div class="ibox">ğŸ§¹</div><div class="txt"><h2>å‹¤å‹™è¿½è¹¤</h2><p>åˆ†å·¥ç®¡ç†</p></div></a>
            <a href="seating/index.html" class="item"><div class="ibox">ğŸª‘</div><div class="txt"><h2>é¸ä½ç³»çµ±</h2><p>å…¬å¹³æ©Ÿåˆ¶</p></div></a>
            <a href="vote/index.html" class="item"><div class="ibox">ğŸ—³ï¸</div><div class="txt"><h2>æ•¸ä½æŠ•ç¥¨</h2><p>ä¸€éµè¡¨æ±º</p></div></a>
            <a href="grouping/index.html" class="item"><div class="ibox">ğŸ²</div><div class="txt"><h2>éš¨æ©Ÿåˆ†çµ„</h2><p>å¤šå…ƒåˆ†çµ„</p></div></a>
        </div></section>
        <section class="panel"><div class="grid">
            <a href="exam_calc/index.html" class="item"><div class="ibox">ğŸ“</div><div class="txt"><h2>æ®µè€ƒåˆ†æ</h2><p>æˆç¸¾çµ±è¨ˆ</p></div></a>
            <a href="final_calc/index.html" class="item"><div class="ibox">ğŸ“ˆ</div><div class="txt"><h2>å­¸æœŸè©•ä¼°</h2><p>å­¸åˆ†é ä¼°</p></div></a>
        </div></section>
    </main>

    <nav class="nav-fixed">
        <div class="nav-inner">
            <div class="tab" onclick="jumpTo(0)">æé†’</div>
            <div class="tab" onclick="jumpTo(1)">äº’å‹•</div>
            <div class="tab" onclick="jumpTo(2)">ç­å‹™</div>
            <div class="tab" onclick="jumpTo(3)">æˆç¸¾</div>
        </div>
    </nav>

    <div class="modal" id="modal">
        <div class="modal-win">
            <div class="modal-top">
                <div style="width:50px;height:50px;background:rgba(255,255,255,0.2);border:2px solid white;border-radius:50%;margin:0 auto 12px;display:flex;align-items:center;justify-content:center;font-weight:900;font-size:1.5rem;">ç‹</div>
                <h3 id="m-name" style="margin:0;font-size:1.2rem;"></h3>
                <p id="m-ver" style="margin:5px 0 0;font-size:0.8rem;opacity:0.8;"></p>
            </div>
            <div class="modal-body">
                <ul id="m-logs" class="log-area"></ul>
                <button class="close-btn" onclick="toggleModal(false)">é—œé–‰è¦–çª—</button>
            </div>
        </div>
    </div>

    <script>
        const scroll = document.getElementById('scroller');
        const tabs = document.querySelectorAll('.tab');
        let isDark = document.documentElement.classList.contains('dark-mode');
        let currentIdx = parseInt(localStorage.getItem('lastPage')) || 0;

        // ğŸŒŸ æ ¸å¿ƒï¼šç³»çµ±å¤–æ®¼è®Šè‰²èˆ‡ UI åŒæ­¥
        function syncSystemShell() {
            const color = isDark ? "#020617" : "#f8fafc";
            
            // å¼·åˆ¶é‡å¯« Meta
            let meta = document.getElementById('theme-meta');
            if (meta) meta.remove();
            meta = document.createElement('meta');
            meta.id = 'theme-meta';
            meta.name = 'theme-color';
            meta.content = color;
            document.head.appendChild(meta);

            // æ›´æ–° iOS ç‹€æ…‹åˆ—é¢¨æ ¼
            const appleMeta = document.querySelector('meta[name="apple-mobile-web-app-status-bar-style"]');
            if (appleMeta) appleMeta.content = isDark ? "black-translucent" : "default";

            // æ›´æ–°åˆ‡æ›åœ–ç¤º
            document.getElementById('theme-icon').innerHTML = isDark 
                ? '<circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>'
                : '<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>';
            
            // ğŸ’¡ é—œéµï¼šå¼·åˆ¶ç€è¦½å™¨é‡ç¹ªï¼Œé”æˆã€Œä¸é‡æ–°æ•´ç†å°±è®Šè‰²ã€
            document.body.style.display = 'none';
            document.body.offsetHeight; // è§¸ç™¼ reflow
            document.body.style.display = 'block';
        }

        function toggleTheme() {
            isDark = !isDark;
            document.documentElement.classList.toggle('dark-mode', isDark);
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            syncSystemShell();
        }

        function setLayout(mode) {
            document.documentElement.setAttribute('data-layout', mode);
            document.getElementById('list-btn').classList.toggle('active', mode === 'list-mode');
            document.getElementById('grid-btn').classList.toggle('active', mode === 'grid-mode');
            localStorage.setItem('layout', mode);
        }

        // ğŸŒŸ æ ¸å¿ƒï¼šæ™ºæ…§å‹è·³è½‰
        // behavior: 'auto' ç”¨æ–¼è¼‰å…¥æ™‚ç¬é–“å®šä½
        // behavior: 'smooth' ç”¨æ–¼æ‰‹å‹•é»æ“Š
        function jumpTo(idx, behavior = 'smooth') {
            scroll.scrollTo({ left: idx * scroll.offsetWidth, behavior: behavior });
            currentIdx = idx;
            updateTabs();
        }

        function updateTabs() {
            tabs.forEach((t, i) => t.classList.toggle('active', i === currentIdx));
            localStorage.setItem('lastPage', currentIdx);
        }

        scroll.addEventListener('scroll', () => {
            const newIdx = Math.round(scroll.scrollLeft / scroll.offsetWidth);
            if(newIdx !== currentIdx) {
                currentIdx = newIdx;
                updateTabs();
            }
        }, { passive: true });

        function toggleModal(show) {
            if(show) {
                document.getElementById('m-name').innerText = AUTHOR_CONFIG.name;
                document.getElementById('m-ver').innerText = AUTHOR_CONFIG.version;
                document.getElementById('m-logs').innerHTML = AUTHOR_CONFIG.logs.map(l => `<li>â€¢ ${l}</li>`).join('');
                document.getElementById('modal').classList.add('show');
            } else {
                document.getElementById('modal').classList.remove('show');
            }
        }

        // ğŸŒŸ åˆå§‹åŒ–æµç¨‹ (è¼‰å…¥ç¬é–“åŸ·è¡Œ)
        function init() {
            // å…¬å‘Š
            if (GLOBAL_ANNOUNCEMENT) {
                const b = document.getElementById('ann-bar');
                b.innerText = GLOBAL_ANNOUNCEMENT;
                b.style.display = 'block';
            }

            // UI ç‹€æ…‹åŒæ­¥
            syncSystemShell();
            setLayout(localStorage.getItem('layout') || 'list-mode');
            updateTabs();

            // ğŸ’¡ é—œéµï¼šé‡æ–°æ•´ç†å¾Œç¶­æŒåœ¨åŒä¸€é ä¸”ä¸æ»‘å‹•è·³è½‰
            // ä½¿ç”¨ 'auto' ç¢ºä¿ç¬é–“åˆ°é”ç›®æ¨™ï¼Œä¸ç”¢ç”Ÿæ»‘å‹•è¦–è¦º
            jumpTo(currentIdx, 'auto');

            // é‡å°è¦–çª—èª¿æ•´å¤§å°æ™‚çš„å®šä½è£œä¿®
            window.addEventListener('resize', () => jumpTo(currentIdx, 'auto'));
        }

        // å•Ÿå‹•
        document.addEventListener('DOMContentLoaded', init);
        window.onload = () => {
            // æŸäº›ç€è¦½å™¨éœ€è¦ onload äºŒæ¬¡æ ¡æº–
            jumpTo(currentIdx, 'auto');
        };
    </script>
</body>
</html>
