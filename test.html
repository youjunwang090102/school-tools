<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>éœ‡å‹•æ„Ÿå®˜å¯¦é©—å®¤</title>
    <style>
        :root { --p: #4361ee; }
        body { margin: 0; font-family: sans-serif; background: #f0f2f5; overflow: hidden; }
        
        /* éš±è—ä½†å­˜åœ¨çš„ã€Œæ‹‰æ¡¿é©…å‹•å™¨ã€ */
        #haptic-driver {
            position: fixed; top: -50px; opacity: 0; pointer-events: none;
        }

        /* å¯æ»‘å‹•å®¹å™¨ */
        .scroll-container {
            display: flex; width: 100vw; height: 80vh;
            overflow-x: auto; scroll-snap-type: x mandatory;
            scrollbar-width: none;
        }
        .scroll-container::-webkit-scrollbar { display: none; }

        .page {
            flex: 0 0 100vw; height: 100%;
            display: flex; align-items: center; justify-content: center;
            font-size: 5rem; font-weight: bold; color: white;
            scroll-snap-align: start;
        }

        /* åº•éƒ¨å°è¦½åˆ— */
        .nav {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
            display: flex; background: white; padding: 10px; border-radius: 50px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1); gap: 10px;
        }
        .dot {
            width: 50px; height: 50px; border-radius: 25px;
            background: #ddd; display: flex; align-items: center; justify-content: center;
            transition: 0.3s; font-weight: bold; color: #666;
        }
        .dot.active { background: var(--p); color: white; transform: scale(1.1); }

        #status { text-align: center; padding: 20px; font-weight: bold; color: var(--p); }
    </style>
</head>
<body>

    <input type="range" id="haptic-driver" min="0" max="100" value="0">

    <div id="status">å·¦å³æ»‘å‹•ä¸‹æ–¹è‰²å¡Šæ¸¬è©¦éœ‡å‹•</div>

    <div class="scroll-container" id="scroller">
        <div class="page" style="background: #ffadad;">1</div>
        <div class="page" style="background: #ffd6a5;">2</div>
        <div class="page" style="background: #fdffb6;">3</div>
        <div class="page" style="background: #caffbf;">4</div>
    </div>

    <div class="nav">
        <div class="dot active">1</div>
        <div class="dot">2</div>
        <div class="dot">3</div>
        <div class="dot">4</div>
    </div>

    <script>
        const scroller = document.getElementById('scroller');
        const driver = document.getElementById('haptic-driver');
        const dots = document.querySelectorAll('.dot');
        const status = document.getElementById('status');
        
        let lastIdx = 0;

        // ğŸ“³ éœ‡å‹•æ ¸å¿ƒå‡½æ•¸
        function triggerHaptic() {
            // 1. Android æ¨™æº–éœ‡å‹• (15æ¯«ç§’çŸ­éœ‡)
            if (navigator.vibrate) {
                navigator.vibrate(15);
            }

            // 2. iPhone æ¨¡æ“¬éœ‡å‹• (åˆ©ç”¨ä½ ç™¼ç¾çš„æ‹‰æ¡¿åŸç†)
            // é€éä¸æ–·æ”¹è®Šæ‹‰æ¡¿å€¼ï¼Œèª˜ç™¼ iOS åº•å±¤å° UI è®Šå‹•çš„ Haptic å›é¥‹
            driver.value = (parseInt(driver.value) + 1) % 100;
            driver.dispatchEvent(new Event('input'));
            
            console.log("Haptic Triggered!");
        }

        // ç›£è½æ»‘å‹•
        scroller.addEventListener('scroll', () => {
            const width = window.innerWidth;
            // è¨ˆç®—ç›®å‰åœ¨å“ªä¸€é  (å››æ¨äº”å…¥)
            const currentIdx = Math.round(scroller.scrollLeft / width);

            // ç•¶ç´¢å¼•æ”¹è®Šæ™‚ï¼Œä»£è¡¨ã€Œè·¨éäº†ä¸€æ ¼ã€
            if (currentIdx !== lastIdx) {
                triggerHaptic(); // ğŸ’“ é—œéµï¼šè·¨æ ¼éœ‡å‹•
                
                // æ›´æ–° UI
                dots.forEach((dot, i) => {
                    dot.classList.toggle('active', i === currentIdx);
                });
                
                status.innerText = `ç›®å‰åœ¨ç¬¬ ${currentIdx + 1} é  - å·²éœ‡å‹•`;
                lastIdx = currentIdx;
            }
        }, { passive: true });

        // åˆå§‹é»æ“Šè§£é– (è¨±å¤šç€è¦½å™¨éœ€è¦ç¬¬ä¸€æ¬¡é»æ“Šæ‰èƒ½å•Ÿç”¨éœ‡å‹•)
        document.body.addEventListener('touchstart', () => {
            // ç©ºè§¸ç™¼ï¼Œç”¨ä¾†ç²å–ç¡¬é«”æ¬Šé™
            driver.focus();
        }, { once: true });

    </script>
</body>
</html>
