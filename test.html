<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ç­ç´šæ•¸ä½å¹³å° v3.3.0</title>

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <style>
        /* ç¹¼æ‰¿æ‚¨åŸæœ¬çš„è®Šæ•¸èˆ‡ç¾å­¸ */
        :root {
            --p: #4361ee; --bg: #f8fafc; --card: #ffffff; --text: #1e293b;
            --nav-bg: rgba(255, 255, 255, 0.8); --border: rgba(0,0,0,0.08);
            --safe-top: env(safe-area-inset-top);
        }
        .dark-mode {
            --bg: #020617; --card: #111827; --text: #f8fafc; --nav-bg: rgba(15, 23, 42, 0.8);
        }

        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            background: var(--bg); color: var(--text); overflow: hidden;
            font-family: system-ui, -apple-system, sans-serif;
        }

        /* --- æ ¸å¿ƒï¼šApp å®¹å™¨å±¤ç´š --- */
        #app-shell { position: relative; width: 100%; height: 100%; display: flex; flex-direction: column; }

        header {
            padding: calc(var(--safe-top) + 15px) 20px 15px;
            background: var(--nav-bg); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center;
        }

        /* é é¢æ²å‹•å¼•æ“ (ä¿ç•™æ‚¨çš„æ ¸å¿ƒ) */
        .viewport {
            flex: 1; display: flex; overflow-x: auto; scroll-snap-type: x mandatory;
            scrollbar-width: none; -webkit-overflow-scrolling: touch;
        }
        .viewport::-webkit-scrollbar { display: none; }
        .page-panel { flex: 0 0 100%; width: 100%; height: 100%; scroll-snap-align: start; overflow-y: auto; padding: 20px; box-sizing: border-box; }

        /* æ‚¨åŸæœ¬çš„å¡ç‰‡ç¾å­¸ */
        .card {
            background: var(--card); border: 1px solid var(--border); border-radius: 24px;
            padding: 22px; margin-bottom: 15px; display: flex; align-items: center;
            text-decoration: none; color: inherit; transition: 0.2s;
        }
        .card:active { transform: scale(0.97); background: rgba(67, 97, 238, 0.1); }
        .card-icon { width: 56px; height: 56px; border-radius: 16px; background: rgba(67, 97, 238, 0.1); color: var(--p); display: flex; align-items: center; justify-content: center; font-size: 24px; margin-right: 20px; }

        /* --- è§£æ±ºç¶²å€åˆ—å½ˆå‡ºçš„é—œéµï¼šTool Viewer --- */
        #tool-viewer {
            position: fixed; inset: 0; background: var(--bg); z-index: 10000;
            transform: translateY(100%); transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex; flex-direction: column;
        }
        #tool-viewer.active { transform: translateY(0); }
        
        .tool-header {
            padding: calc(var(--safe-top) + 10px) 20px 10px;
            background: var(--card); display: flex; align-items: center; border-bottom: 1px solid var(--border);
        }
        .back-btn { padding: 10px; font-weight: 900; color: var(--p); cursor: pointer; }
        
        iframe { flex: 1; border: none; width: 100%; height: 100%; }

        /* åº•éƒ¨å°è¦½ (æ‚¨çš„åŸå§‹è¨­è¨ˆå„ªåŒ–) */
        .nav-dock { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); width: 90%; z-index: 5000; }
        .nav-glass { background: var(--nav-bg); backdrop-filter: blur(25px); border-radius: 100px; display: flex; padding: 6px; border: 1px solid var(--border); box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .nav-item { flex: 1; text-align: center; padding: 14px 0; font-size: 14px; font-weight: 800; color: #94a3b8; border-radius: 100px; }
        .nav-item.active { background: var(--p); color: white; }
    </style>
</head>
<body>

<div id="app-shell">
    <header>
        <div>
            <h1 style="margin:0; font-size:20px; color:var(--p);">ç­ç´šæ•¸ä½å¹³å°</h1>
            <p style="margin:0; font-size:10px; color:#94a3b8; font-weight:800;">DIGITAL CLASSROOM</p>
        </div>
        <button onclick="document.documentElement.classList.toggle('dark-mode')" style="border:none; background:none; font-size:20px;">ğŸŒ“</button>
    </header>

    <main class="viewport" id="scroll-engine">
        <section class="page-panel">
            <div class="card" onclick="openTool('countdown/index.html', 'è€ƒç¨‹å€’æ•¸')">
                <div class="card-icon">â³</div>
                <div class="card-info"><h2>è€ƒç¨‹å€’æ•¸</h2><p>å€’æ•¸æ®µè€ƒèˆ‡çµ±æ¸¬</p></div>
            </div>
            <div class="card" onclick="openTool('homework/index.html', 'ä½œæ¥­å¾…è¾¦')">
                <div class="card-icon">ğŸ“’</div>
                <div class="card-info"><h2>ä½œæ¥­å¾…è¾¦</h2><p>åŠæ™‚æŸ¥çœ‹ä¸éºæ¼</p></div>
            </div>
        </section>

        <section class="page-panel">
            <div class="card" onclick="openTool('unknownmail/index.html', 'åŒ¿åä¿¡ç®±')">
                <div class="card-icon">âœ‰ï¸</div>
                <div class="card-info"><h2>åŒ¿åä¿¡ç®±</h2><p>å‚³é€æé†’çµ¦åŒå­¸</p></div>
            </div>
        </section>
    </main>

    <nav class="nav-dock">
        <div class="nav-glass">
            <div class="nav-item active" onclick="moveTo(0)">æé†’</div>
            <div class="nav-item" onclick="moveTo(1)">äº’å‹•</div>
            <div class="nav-item">ç­å‹™</div>
            <div class="nav-item">æˆç¸¾</div>
        </div>
    </nav>
</div>

<div id="tool-viewer">
    <div class="tool-header">
        <div class="back-btn" onclick="closeTool()">âœ• é—œé–‰å·¥å…·</div>
        <div id="tool-title" style="flex:1; text-align:center; font-weight:800;"></div>
    </div>
    <iframe id="tool-frame" src=""></iframe>
</div>

<script>
    const scroller = document.getElementById('scroll-engine');
    const tabs = document.querySelectorAll('.nav-item');

    // æ ¸å¿ƒ 1: æ²å‹•åŒæ­¥
    function moveTo(idx) {
        const width = scroller.offsetWidth;
        scroller.scrollTo({ left: idx * width, behavior: 'smooth' });
        updateNav(idx);
    }

    function updateNav(idx) {
        tabs.forEach((t, i) => t.classList.toggle('active', i === idx));
    }

    // æ ¸å¿ƒ 2: è§£æ±ºç¶²å€åˆ—è·‘å‡ºä¾†çš„é—œéµ
    function openTool(url, title) {
        const viewer = document.getElementById('tool-viewer');
        const frame = document.getElementById('tool-frame');
        document.getElementById('tool-title').innerText = title;
        
        frame.src = url; // å‹•æ…‹åŠ è¼‰
        viewer.classList.add('active'); // å‘ä¸Šæ»‘å…¥
        
        // ç‚ºäº†æ¥µè‡´ App é«”é©—ï¼Œå¯ä»¥é–å®šèƒŒæ™¯æ²å‹•
        document.body.style.overflow = 'hidden';
    }

    function closeTool() {
        const viewer = document.getElementById('tool-viewer');
        viewer.classList.remove('active');
        setTimeout(() => { document.getElementById('tool-frame').src = ''; }, 400);
    }

    // ç›£è½æ²å‹•
    scroller.addEventListener('scroll', () => {
        const idx = Math.round(scroller.scrollLeft / scroller.offsetWidth);
        updateNav(idx);
    });
</script>

</body>
</html>
