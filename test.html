<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ClassHub Pro v6.0</title>
    <style>
        :root {
            --bg: #0f172a;
            --surface: #1e293b;
            --primary: #38bdf8;
            --text: #f1f5f9;
            --text-dim: #94a3b8;
            --safe-b: env(safe-area-inset-bottom, 20px);
            --radius: 24px;
        }

        [data-theme="light"] {
            --bg: #f8fafc;
            --surface: #ffffff;
            --text: #0f172a;
            --text-dim: #64748b;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            margin: 0; background: var(--bg); color: var(--text);
            font-family: "Inter", -apple-system, system-ui, sans-serif;
            overflow: hidden; transition: background 0.5s ease;
        }

        /* --- æ¥µç°¡ Header --- */
        header {
            position: fixed; top: 0; width: 100%; height: 90px;
            display: flex; justify-content: space-between; align-items: center;
            padding: 40px 24px 0; z-index: 100;
        }
        .logo { font-size: 20px; font-weight: 800; letter-spacing: -1px; }
        .nav-btns { display: flex; gap: 15px; }
        .icon-btn {
            background: none; border: none; color: var(--text);
            cursor: pointer; padding: 5px;
        }

        /* --- ç‰©ç†åˆ†é ç³»çµ± --- */
        .viewport {
            display: flex; width: 100vw; height: 100vh;
            overflow-x: auto; scroll-snap-type: x mandatory;
            scrollbar-width: none; -webkit-overflow-scrolling: touch;
        }
        .viewport::-webkit-scrollbar { display: none; }
        .page {
            flex: 0 0 100vw; height: 100vh; scroll-snap-align: start;
            padding: 110px 24px 140px; overflow-y: auto;
        }

        /* --- éŸ¿æ‡‰å¼å¡ç‰‡ (åµæ¸¬è¢å¹•) --- */
        .grid {
            display: grid; gap: 16px; width: 100%; max-width: 1000px; margin: 0 auto;
        }
        @media (min-width: 800px) { .grid { grid-template-columns: repeat(3, 1fr); } }
        @media (max-width: 799px) { .grid { grid-template-columns: 1fr; } }

        .item {
            background: var(--surface); border-radius: var(--radius);
            padding: 24px; text-decoration: none; color: inherit;
            display: flex; align-items: center; gap: 20px;
            border: 1px solid rgba(255,255,255,0.05);
            transition: transform 0.2s cubic-bezier(0.2, 0, 0, 1);
        }
        .item:active { transform: scale(0.96); }
        .icon-box { width: 48px; height: 48px; border-radius: 16px; background: rgba(56, 189, 248, 0.1); display: flex; align-items: center; justify-content: center; font-size: 24px; }

        /* --- åº•éƒ¨å°è¦½åˆ— (æ°´éŠ€é€£å‹•) --- */
        .dock-container {
            position: fixed; bottom: var(--safe-b); left: 50%;
            transform: translateX(-50%); width: 92%; max-width: 400px; z-index: 200;
        }
        .dock {
            display: flex; background: rgba(30, 41, 59, 0.8); backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px); border-radius: 30px; padding: 6px;
            border: 1px solid rgba(255,255,255,0.1); position: relative;
        }
        .indicator {
            position: absolute; top: 6px; left: 6px; bottom: 6px;
            width: calc(25% - 12px); background: var(--primary);
            border-radius: 25px; z-index: 0; box-shadow: 0 4px 15px rgba(56, 189, 248, 0.4);
        }
        .tab { flex: 1; padding: 12px 0; text-align: center; z-index: 1; font-size: 13px; font-weight: 700; color: var(--text-dim); transition: 0.3s; }
        .tab.active { color: white; }

        /* --- é ‚ç´šç‰©ç†æŠ½å±œ (Bottom Sheet) --- */
        .overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.6);
            opacity: 0; visibility: hidden; transition: 0.3s; z-index: 1000;
        }
        .overlay.active { opacity: 1; visibility: visible; }
        .sheet {
            position: absolute; bottom: 0; left: 0; width: 100%;
            background: var(--bg); border-radius: 32px 32px 0 0;
            padding: 15px 24px calc(30px + var(--safe-b));
            transform: translateY(100%); will-change: transform;
            transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            max-height: 92vh; overflow: hidden;
        }
        .handle-area { width: 100%; height: 30px; display: flex; justify-content: center; cursor: grab; }
        .handle { width: 40px; height: 5px; background: var(--text-dim); opacity: 0.3; border-radius: 10px; }
        .sheet-content { overflow-y: auto; height: 100%; padding-top: 10px; }

        /* è¨­å®šå…§å…ƒç´  */
        .set-group { background: var(--surface); border-radius: 20px; padding: 5px; margin-bottom: 20px; display: flex; }
        .set-group button { flex: 1; border: none; background: none; color: var(--text-dim); padding: 12px; font-weight: 700; border-radius: 15px; }
        .set-group button.active { background: var(--primary); color: white; }
    </style>
</head>
<body>

    <header>
        <div class="logo">ClassHub<span style="color:var(--primary)">.</span></div>
        <div class="nav-btns">
            <button class="icon-btn" onclick="APP.openSheet('settings')">
                <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 15a3 3 0 100-6 3 3 0 000 6z"/><path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 00 1.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"/></svg>
            </button>
            <button class="icon-btn" onclick="APP.openSheet('about')">
                <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg>
            </button>
        </div>
    </header>

    <main class="viewport" id="vp">
        <section class="page"><div class="grid">
            <a href="#" class="item"><div class="icon-box">ğŸ“…</div><div><h3>ç­ç´šè¡Œäº‹æ›†</h3><p style="color:var(--text-dim);margin:0;font-size:13px">æŒæ¡è€ƒç¨‹èˆ‡é‡è¦æ´»å‹•</p></div></a>
            <a href="#" class="item"><div class="icon-box">â³</div><div><h3>è€ƒç¨‹å€’æ•¸</h3><p style="color:var(--text-dim);margin:0;font-size:13px">æ®µè€ƒã€çµ±æ¸¬ç²¾å¯†å€’æ•¸</p></div></a>
        </div></section>
        <section class="page"><div class="grid">
            <a href="#" class="item"><div class="icon-box">âœ‰ï¸</div><div><h3>åŒ¿åä¿¡ç®±</h3><p style="color:var(--text-dim);margin:0;font-size:13px">å®‰å…¨ç„¡ç—•çš„äº¤æµç©ºé–“</p></div></a>
        </div></section>
        <section class="page"><div class="grid">
            <a href="#" class="item"><div class="icon-box">ğŸ§¹</div><div><h3>æ‰“æƒå‹¤å‹™</h3><p style="color:var(--text-dim);margin:0;font-size:13px">å€‹äººå€åŸŸèˆ‡é»æ•¸å›å ±</p></div></a>
        </div></section>
        <section class="page"><div class="grid">
            <a href="#" class="item"><div class="icon-box">ğŸ“ˆ</div><div><h3>å­¸æœŸç¸½åˆ†</h3><p style="color:var(--text-dim);margin:0;font-size:13px">åŠ æ¬Šå¹³å‡è‡ªå‹•åŒ–è¨ˆç®—</p></div></a>
        </div></section>
    </main>

    <div class="dock-container">
        <div class="dock">
            <div class="indicator" id="ind"></div>
            <div class="tab active" onclick="APP.nav(0)">æé†’</div>
            <div class="tab" onclick="APP.nav(1)">äº’å‹•</div>
            <div class="tab" onclick="APP.nav(2)">ç­å‹™</div>
            <div class="tab" onclick="APP.nav(3)">æˆç¸¾</div>
        </div>
    </div>

    <div class="overlay" id="ov-settings" onclick="APP.closeSheet('settings')">
        <div class="sheet" id="sh-settings" onclick="event.stopPropagation()">
            <div class="handle-area" id="hd-settings"><div class="handle"></div></div>
            <div class="sheet-content">
                <h2 style="margin:0 0 20px">å€‹äººåŒ–è¨­å®š</h2>
                <p style="font-size:14px; color:var(--text-dim)">å¤–è§€æ¨¡å¼</p>
                <div class="set-group">
                    <button id="dark-btn" class="active" onclick="APP.theme('dark')">æ·±è‰²ç§‘æŠ€</button>
                    <button id="light-btn" onclick="APP.theme('light')">ç´”æ·¨æ·ºè‰²</button>
                </div>
                <p style="font-size:14px; color:var(--text-dim)">ç³»çµ±é£½å’Œåº¦</p>
                <input type="range" style="width:100%; accent-color:var(--primary)" oninput="document.documentElement.style.setProperty('--primary', `hsl(200, ${this.value}%, 60%)`)">
                
                <div style="margin-top:40px; border-top:1px solid rgba(255,255,255,0.1); padding-top:20px;">
                    <p style="color:var(--text-dim)">å¾€ä¸Šæ‹‰å‹•ä»¥å±•é–‹é€²éšé–‹ç™¼è€…é¸é …...</p>
                    <div style="height:400px; background:rgba(255,255,255,0.03); border-radius:20px; display:flex; align-items:center; justify-content:center; color:var(--text-dim)">
                        é€²éšè¨ºæ–·è³‡è¨Š (ç‰©ç†å±•é–‹æˆåŠŸ)
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const APP = {
            init() {
                const vp = document.getElementById('vp');
                const ind = document.getElementById('ind');
                
                // 1. æ°´éŠ€è¯å‹•å°è¦½
                vp.addEventListener('scroll', () => {
                    const x = vp.scrollLeft / vp.offsetWidth;
                    ind.style.transform = `translateX(${x * 100}%)`;
                    const idx = Math.round(x);
                    document.querySelectorAll('.tab').forEach((t, i) => t.classList.toggle('active', i === idx));
                }, {passive: true});

                this.gestures('settings');
                this.gestures('about');
            },

            nav(i) {
                document.getElementById('vp').scrollTo({left: window.innerWidth * i, behavior: 'smooth'});
            },

            theme(t) {
                document.body.setAttribute('data-theme', t);
                document.getElementById('dark-btn').classList.toggle('active', t==='dark');
                document.getElementById('light-btn').classList.toggle('active', t==='light');
            },

            openSheet(id) {
                document.getElementById(`ov-${id}`).classList.add('active');
                document.getElementById(`sh-${id}`).style.transform = 'translateY(0)';
            },

            closeSheet(id) {
                document.getElementById(`ov-${id}`).classList.remove('active');
                document.getElementById(`sh-${id}`).style.transform = 'translateY(100%)';
            },

            // 2. é ‚ç´šç‰©ç†æ‰‹å‹¢ (å«ä¸‰æ®µå¼å±•é–‹)
            gestures(id) {
                const sh = document.getElementById(`sh-${id}`);
                const hd = document.getElementById(`hd-${id}`);
                let startY, currentY, isDragging = false;

                const onStart = (e) => {
                    startY = e.touches[0].clientY;
                    isDragging = true;
                    sh.style.transition = 'none';
                };

                const onMove = (e) => {
                    if(!isDragging) return;
                    currentY = e.touches[0].clientY - startY;
                    
                    // å¾€ä¸Šæ‹‰çš„é˜»å°¼
                    if(currentY < 0) {
                        sh.style.transform = `translateY(${currentY * 0.2}px)`;
                    } else {
                        sh.style.transform = `translateY(${currentY}px)`;
                    }
                };

                const onEnd = () => {
                    isDragging = false;
                    sh.style.transition = 'transform 0.5s cubic-bezier(0.16, 1, 0.3, 1)';
                    
                    if(currentY > 150) this.closeSheet(id); // ä¸‹æ»‘æ”¶èµ·
                    else if(currentY < -100) sh.style.transform = 'translateY(-10vh)'; // ä¸Šæ‹‰å±•é–‹æ›´å¤š
                    else sh.style.transform = 'translateY(0)'; // å›å½ˆ
                    currentY = 0;
                };

                hd.addEventListener('touchstart', onStart);
                window.addEventListener('touchmove', onMove, {passive: false});
                window.addEventListener('touchend', onEnd);
            }
        };
        window.onload = () => APP.init();
    </script>
</body>
</html>
