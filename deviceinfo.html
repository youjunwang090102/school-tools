<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>裝置與 IP 偵測</title>
</head>
<body>
    <h2>您的連線資訊</h2>
    <ul id="info">
        <li>載入中...</li>
    </ul>

    <script>
        async function detectInfo() {
            const infoList = document.getElementById('info');
            let details = [];

            // 1. 獲取 IP 位址 (使用公共 API)
            try {
                const response = await fetch('https://ipapi.co/json/');
                const data = await response.json();
                details.push(`<b>IP 位址:</b> ${data.ip}`);
                details.push(`<b>地點:</b> ${data.city}, ${data.country_name}`);
            } catch (e) {
                details.push(`<b>IP 位址:</b> 無法取得 (請檢查廣告阻擋器)`);
            }

            // 2. 獲取 User-Agent 與基礎硬體資訊
            const ua = navigator.userAgent;
            let os = "未知作業系統";
            let device = "個人電腦 / 筆電";

            // 偵測作業系統與版本
            if (ua.includes("Windows NT 10.0")) os = "Windows 10 或 11";
            if (ua.includes("iPhone")) {
                os = "iOS";
                device = "iPhone";
                // 嘗試解析版本 (例如 iOS 26_1)
                const versionMatch = ua.match(/OS (\d+)_(\d+)/);
                if (versionMatch) os += ` ${versionMatch[1]}.${versionMatch[2]}`;
            }
            if (ua.includes("iPad")) {
                os = "iPadOS";
                device = "iPad";
            }
            if (ua.includes("Macintosh")) {
                os = "macOS";
                device = "MacBook / iMac";
            }

            // 3. 偵測螢幕解析度 (輔助判斷型號)
            const screenRes = `${window.screen.width} x ${window.screen.height}`;

            details.push(`<b>作業系統:</b> ${os}`);
            details.push(`<b>裝置類型:</b> ${device}`);
            details.push(`<b>螢幕解析度:</b> ${screenRes}`);
            details.push(`<b>完整 User-Agent:</b> <small>${ua}</small>`);

            infoList.innerHTML = details.map(item => `<li>${item}</li>`).join('');
        }

        detectInfo();
    </script>
</body>
</html>
